#!/bin/bash
# SPDX-FileCopyrightText: 2020-present Open Networking Foundation <info@opennetworking.org>
# SPDX-License-Identifier: LicenseRef-ONF-Member-1.0

# Checks the onos log for errors
container=${1:-$ODI}
regex='ERROR|Exception|Error'
errors=$(${DOCKER_COMPOSE_CMD} logs "${container}" | grep -E -c ${regex})

if [ "$errors" -eq "0" ]; then
   exit 0;
else
  ${DOCKER_COMPOSE_CMD} logs "${container}" | grep -E ${regex}
  exit 1;
fi